{% extends "base.html" %}

{% block title %}Shop{% endblock %}

{% block content %}
  <h1 class="page-title">Products</h1>

  {% if products %}
    <div class="product-grid">
      {% for product in products %}
        <div class="product-card">
          <a href="{% url 'shop:product_detail' product.slug %}">
            {% if product.image %}
              <img src="{{ product.image.url }}" alt="{{ product.name }}">
            {% else %}
              <img src="https://via.placeholder.com/220x180?text=No+Image" alt="No image">
            {% endif %}
            <h3>{{ product.name }}</h3>
          </a>
          <p class="price">${{ product.price }}</p>
          <p>{{ product.description|truncatechars:50 }}</p>
          <form action="{% url 'cart:cart_add' product.id %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn">Add to Cart</button>
          </form>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No products available.</p>
  {% endif %}
{% endblock %}
